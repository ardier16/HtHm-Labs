<!DOCTYPE html>
<html>
<head>
	<meta charset="utf8"> 
	<script type="text/javascript">
		function check(form){
			var name1 = name2 = name3 = num = mail = password1 = password2 = false;
			
				if (!checkName(form.name1.value) || form.name1.value == "")
					alert("Введите правильную фамилию!");
				else
					name1 = true;
					
				if (form.name2.value == "")
					alert("Введите имя!");
				else
					name2 = true;
					
				if (form.name3.value == "")
					alert("Введите отчество!");
				else
					name3 = true;
					
				if (!checkNum(form.num.value))
					alert("Введите корректный номер читательского билета!");
				else
					num = true;
					
				if (form.mail.value == "" || form.mail.value.indexOf('@', 0) == -1) 
					alert("Введите корректный E-Mail!");
				else
					mail = true;
					
				if (form.password1.value == "")
					alert("Введите пароль!");
				else
					password1 = true;
				
				if (form.password2.value !== form.password1.value)
					alert("Пароли не совпадают!");
				else
					password2 = true;	
				
				var res = name1 && name2 && name3 && num && mail && password1 && password2;
				if (res == true){
					result(this.form);
				}
		}
		
		function checkNum(input) {
			var x = parseInt(input);
			if (x.toString() !== "NaN")
				return true;
			return false;
			}
		
		function checkName(input) {
			var x = String(input);
			for (var i = 0; i < input.length; i++)
			{
				var pos = input[i];
				
				if (pos == "1" || pos == "2" || pos == "3" || pos == "4" || pos == "5" || pos == "6" || pos == "7" || pos == "8" || pos == "9" || pos == "0")
					return false;
			}
				return true;
			}
		
		function result(form){
			var newWin = window.open();
			newWin.document.write("<h2>" + "Поздравляем! Вы успешно зарегистрировались на сайте библиотеки." + "</h2>" + 
								   "<h2>" + "Ваши регистрационные данные: " + "</h2>" + 
								   "<p>" + "<b>" + "Фамилия: " + "</b>" + form.name1.value + 
								   "<p>" + "<b>" + "Имя: " + "</b>" + form.name2.value + 
								   "<p>" + "<b>" + "Отчество: " + "</b>" + form.name3.value + 								   
								   "<p>" + "<b>" + "№ читательского билета (логин на сайте): " + "</b>" + form.num.value + 								   
								   "<p>" + "<b>" + "E-Mail: " + "</b>" + form.mail.value + 								   
								   "<p>" + "<b>" + "Пароль: " + "</b>" + form.password1.value);
		}
		

	</script>
</head>
<body>
	<form name="form">
	<h1>Регистрационная форма</h1>
	<p>Фамилия &nbsp<input type="text" name="name1" size="15" maxlength="20"></p>
	<p>Имя &nbsp<input type="text" name="name2" size="15" maxlength="20"></p>
	<p>Отчество &nbsp<input type="text" name="name3" size="15" maxlength="20"></p>
	<p>Номер читательского билета &nbsp<input type="text" name="num" size="7" maxlength="7"></p>
	<p>E-Mail &nbsp<input type="text" name="mail" size="20" maxlength="30"></p>
	<p>Пароль &nbsp<input type="password" name="password1" size="15" maxlength="20"></p>
	<p>Повторите пароль &nbsp<input type="password" name="password2" size="15" maxlength="20"></p>	
	<p><input type="button" name="button" value="Проверить введённые данные и зарегистрироваться" onclick="check(this.form)"></p>	
	</form>
</body>
</html>